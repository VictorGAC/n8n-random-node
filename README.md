# Random n8n Node

Custom node for n8n that wraps the [Random.org true random integer API](https://www.random.org/integers/). The node takes the inclusive minimum and maximum bounds and returns a single unbiased integer generated by Random.org.

## Requirements

- Node.js 22 LTS (use `nvm use 22` or download from [nodejs.org](https://nodejs.org))
- npm 10+
- Docker & Docker Compose

## Project structure

```
.
├── docker-compose.yml         # n8n + PostgreSQL stack configured for local development
├── icons/random.svg           # Icon used by the Random node
├── index.ts                   # Package entry point exporting the node
├── nodes/Random/Random.node.ts
├── dist/                      # Build output consumed by n8n (generated)
└── README.md
```

## Setup

1. Install dependencies
   ```bash
   npm install
   ```
2. Compile the TypeScript sources
   ```bash
   npm run build
   ```
   The compiled files land in `dist/` and are the ones consumed by the n8n runtime.

> Tip: run `npm run dev` when actively developing to rebuild on every change.

## Running n8n locally

1. Start the stack (n8n + PostgreSQL):
   ```bash
   docker compose up -d
   ```
2. Open http://localhost:5678 in the browser and complete the first-time onboarding.
3. The repository is bind-mounted into `/home/node/.n8n/custom/n8n-nodes-random` inside the container, so the Random node is available under the **Random → True Random Number Generator** operation as soon as the build artifacts exist.

To stop the stack run:
```bash
docker compose down
```
(The named volumes `postgres_data` and `n8n_data` persist the database and n8n configuration; append `-v` when you want a clean slate.)

## Using the Random node

- **Min**: inclusive lower bound. Must be an integer.
- **Max**: inclusive upper bound. Must be an integer greater than or equal to **Min**.
- Output: `{ min, max, result, provider }`, where `result` is the integer returned by Random.org.

The node performs input validation and bubbles up API errors from Random.org with a descriptive message.

## Linting & quality checks

- `npm run lint` – ESLint over the `nodes/**/*.ts` sources.

## Publishing / Packaging

When you are ready to distribute the node, run `npm run build` and publish the package (or use `npm pack`) so that other n8n instances can install it via `n8n install <your-package>`.

## Troubleshooting

- If n8n does not list the Random node, ensure `npm run build` ran successfully before starting Docker so that the `dist/` directory exists.
- Because the project enforces Node.js `>=22`, running `npm install` with older runtimes will emit an engine warning.
- Random.org enforces request quotas. A failure will surface inside n8n with context on the underlying issue.

---

Created for the n8n custom node random connector challenge.
